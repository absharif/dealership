{% extends "base/base.html" %}
{% load widget_tweaks %}
{% block content %}
 <!-- MAIN CONTENT-->
            <div class="main-content">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="card filter-area">
                                    <div class="card-header">
                                        <strong>Cash Flow Statement</strong>
                                    </div>
                                    <div class="card-body card-block">
                                        <form action="" method="post" class="form-horizontal" id="personForm" >
                                            {% csrf_token %}

                                            <div class="form-group row">
                                                   <div class="form-group col-md-5">
                                                    <label>Year</label>
                                                    {{ form.year|add_class:"form-control" }}
                                                  </div>

                                                  <div class="form-group col-md-2">
                                                    <button style="width: 100%; margin-top:33px;" type="submit" class="btn btn-md btn-info">Search</button>
                                                  </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            {% if submitted %}
                            <div class="col-lg-12 print">

                               <div class="container only-for-print">
                                <div class="row">
                                  <div class="col-8" style="padding:10px;">
                                    <div class="float-left">
                                      <img src="{{ info.school.logo.url }}" alt="" width="100px;">
                                    </div>
                                      <div class="float-left" style="padding: 10px;">
                                        <h2>{{ info.school.name }} </h2>
                                        <p>{{ info.school.address }}</p>
                                      </div>
                                  </div>
                                    <div class="col-4">
                                    </div>
                                  </div>
                                </div>

                              <div class="container">
                                <div class="row justify-content-md-center headline">
                                  <div class="col-12">
                                    <hr>
                                  </div>
                                  <div class="col-md-auto">
                                      <h3>Cash Flow Statement</h3>
                                      <br>
                                  </div>
                                </div>
                                    <div class="row headline">
                                        <table>
                                          <thead>
                                            <tr style="font-weight: bold; background-color: rgb(100, 100, 100); color: white;">
                                              <td>Month</td>
                                              <td>Inflow</td>
                                              <td>Outflow</td>
                                              <td>Net flow</td>
                                            </tr>
                                          </thead>
                                          <tbody>
                                             {% for key, value in data.items %}
                                                   <tr>
                                                       <td style="text-align: left; padding:5px;">{{ key }}</td>
                                                       <td style="text-align: right; padding:5px;">{{ value.inflow }}</td>
                                                       <td style="text-align: right; padding:5px;">{{ value.outflow }}</td>
                                                       <td style="text-align: right; padding:5px;">{{ value.net_flow }}</td>
                                                   </tr>
                                             {% endfor %}
                                                    <tr>
                                                        <td><b>Total</b></td>
                                                        <td style="text-align: right; padding:5px;"><b>{{ info.total_inflow }}</b></td>
                                                        <td style="text-align: right; padding:5px;"><b>{{ info.total_outflow }}</b></td>
                                                        <td style="text-align: right; padding:5px;"><b>{{ info.total_net_flow }}</b></td>
                                                    </tr>

                                          </tbody>
                                        </table>
                                    </div>
                              </div>

                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
{% endblock %}
